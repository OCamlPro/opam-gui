{"openapi":"3.0.2","info":{"description":"API","version":"1.0","title":"opam-gui API","termsOfService":"http://www.ocamlpro.com","contact":{"email":""},"license":{"name":"AGPL 3.0","url":"https://www.gnu.org/licenses/agpl-3.0.en.html"}},"servers":[{"url":"api","description":"-o"}],"tags":[{"name":"API"}],"paths":{"/version":{"get":{"tags":["API"],"summary":"Version","description":"","operationId":"0","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"db":{"type":"string"},"db_version":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["db_version","db"],"additionalProperties":false}}}}},"security":[]}},"/state":{"get":{"tags":["API"],"summary":"/state","description":"","operationId":"1","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"times":{"type":"object","properties":{"global_mtime":{"type":"string"},"repos_mtime":{"type":"string"},"switches":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"type":"string"}],"additionalItems":false}}},"required":["switches","repos_mtime","global_mtime"],"additionalProperties":false},"global":{"type":"object","properties":{"opamroot":{"type":"string"},"configfile":{"type":"string"},"repos":{"type":"array","items":{"type":"string"}},"current_switch":{"type":"string"}},"required":["repos","configfile","opamroot"],"additionalProperties":false},"repos":{},"switches":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"oneOf":[{"type":"object","properties":{"switch_name":{"type":"string"},"switch_dirname":{"type":"string"},"switch_state":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_config":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_base":{"type":"array","items":{"type":"string"}},"switch_roots":{"type":"array","items":{"type":"string"}},"switch_installed":{"type":"array","items":{"type":"string"}},"switch_pinned":{"type":"array","items":{"type":"string"}}},"required":["switch_pinned","switch_installed","switch_roots","switch_base","switch_config","switch_state","switch_dirname","switch_name"],"additionalProperties":false},{"type":"null"}]}],"additionalItems":false}}},"required":["switches","times"],"additionalProperties":false}}}}},"security":[]}},"/partial_state":{"post":{"tags":["API"],"summary":"/partial_state","description":"","operationId":"2","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"times":{"type":"object","properties":{"global_mtime":{"type":"string"},"repos_mtime":{"type":"string"},"switches":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"type":"string"}],"additionalItems":false}}},"required":["switches","repos_mtime","global_mtime"],"additionalProperties":false},"global":{"type":"object","properties":{"opamroot":{"type":"string"},"configfile":{"type":"string"},"repos":{"type":"array","items":{"type":"string"}},"current_switch":{"type":"string"}},"required":["repos","configfile","opamroot"],"additionalProperties":false},"repos":{},"switches":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"oneOf":[{"type":"object","properties":{"switch_name":{"type":"string"},"switch_dirname":{"type":"string"},"switch_state":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_config":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_base":{"type":"array","items":{"type":"string"}},"switch_roots":{"type":"array","items":{"type":"string"}},"switch_installed":{"type":"array","items":{"type":"string"}},"switch_pinned":{"type":"array","items":{"type":"string"}}},"required":["switch_pinned","switch_installed","switch_roots","switch_base","switch_config","switch_state","switch_dirname","switch_name"],"additionalProperties":false},{"type":"null"}]}],"additionalItems":false}}},"required":["switches","times"],"additionalProperties":false}}}}},"security":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"global_mtime":{"type":"string"},"repos_mtime":{"type":"string"},"switches":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"type":"string"}],"additionalItems":false}}},"required":["switches","repos_mtime","global_mtime"],"additionalProperties":false}}}}}},"/switch/{switch}":{"get":{"tags":["API"],"summary":"/switch/{switch}","description":"","operationId":"3","parameters":[{"name":"switch","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"SWITCH"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"switch_name":{"type":"string"},"switch_dirname":{"type":"string"},"switch_state":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_config":{"oneOf":[{"type":"string"},{"type":"null"}]},"switch_base":{"type":"array","items":{"type":"string"}},"switch_roots":{"type":"array","items":{"type":"string"}},"switch_installed":{"type":"array","items":{"type":"string"}},"switch_pinned":{"type":"array","items":{"type":"string"}}},"required":["switch_pinned","switch_installed","switch_roots","switch_base","switch_config","switch_state","switch_dirname","switch_name"],"additionalProperties":false}}}}},"security":[]}},"/switch_packages/{switch}":{"get":{"tags":["API"],"summary":"/switch_packages/{switch}","description":"","operationId":"4","parameters":[{"name":"switch","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"SWITCH"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"security":[]}},"/switch_opams":{"post":{"tags":["API"],"summary":"/switch_opams","description":"","operationId":"5","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"synopsis":{"type":"string"},"description":{"type":"string"},"authors":{"type":"array","items":{"type":"string"}},"license":{"type":"array","items":{"type":"string"}},"available":{"type":"boolean"},"urls":{"type":"array","items":{"type":"string"}},"hashes":{"type":"array","items":{"type":"string"}},"depends":{"type":"object","properties":{"dep_set":{"type":"array","items":{"type":"string"}},"formula":{"type":"string"}},"required":["formula"],"additionalProperties":false},"depopts":{"type":"object","properties":{"dep_set":{"type":"array","items":{"type":"string"}},"formula":{"type":"string"}},"required":["formula"],"additionalProperties":false}},"required":["depopts","depends","description","synopsis","version","name"],"additionalProperties":false}}}}}},"security":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"switch":{"type":"string"},"packages":{"type":"array","items":{"type":"string"}}},"required":["packages","switch"],"additionalProperties":false}}}}}},"/switch_opam/{switch_nv}":{"get":{"tags":["API"],"summary":"/switch_opam/{switch_nv}","description":"","operationId":"6","parameters":[{"name":"switch_nv","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"SWITCH,NAME.VERSION"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"synopsis":{"type":"string"},"description":{"type":"string"},"authors":{"type":"array","items":{"type":"string"}},"license":{"type":"array","items":{"type":"string"}},"available":{"type":"boolean"},"urls":{"type":"array","items":{"type":"string"}},"hashes":{"type":"array","items":{"type":"string"}},"depends":{"type":"object","properties":{"dep_set":{"type":"array","items":{"type":"string"}},"formula":{"type":"string"}},"required":["formula"],"additionalProperties":false},"depopts":{"type":"object","properties":{"dep_set":{"type":"array","items":{"type":"string"}},"formula":{"type":"string"}},"required":["formula"],"additionalProperties":false}},"required":["depopts","depends","description","synopsis","version","name"],"additionalProperties":false}}}}}},"security":[]}},"/switch_opam_extras":{"post":{"tags":["API"],"summary":"/switch_opam_extras","description":"","operationId":"7","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"nv":{"type":"string"},"dir":{"type":"string"},"content":{"type":"string"},"changes":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"type":"object","properties":{"op":{"type":"string"},"size":{"type":"string"}},"required":["op"],"additionalProperties":false}],"additionalItems":false}}},"required":["nv"],"additionalProperties":false}}}}}},"security":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"switch":{"type":"string"},"packages":{"type":"array","items":{"type":"string"}}},"required":["packages","switch"],"additionalProperties":false}}}}}},"/switch_opam_extra/{switch_nv}":{"get":{"tags":["API"],"summary":"/switch_opam_extra/{switch_nv}","description":"","operationId":"8","parameters":[{"name":"switch_nv","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"SWITCH,NAME.VERSION"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"nv":{"type":"string"},"dir":{"type":"string"},"content":{"type":"string"},"changes":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"type":"object","properties":{"op":{"type":"string"},"size":{"type":"string"}},"required":["op"],"additionalProperties":false}],"additionalItems":false}}},"required":["nv"],"additionalProperties":false}}}}}},"security":[]}},"/opam":{"post":{"tags":["API"],"summary":"/opam","description":"","operationId":"9","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"pid":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"command":{"type":"array","items":{"type":"string"}},"line":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"log":{"type":"array","items":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"string"}],"additionalItems":false}},"status":{"type":"object","properties":{"status":{"type":"string"},"code":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["status"],"additionalProperties":false},"begin":{"type":"string"},"end":{"type":"string"}},"required":["begin","command","pid"],"additionalProperties":false}}}}},"security":[],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}}},"/poll":{"post":{"tags":["API"],"summary":"/poll","description":"","operationId":"10","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"pid":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"command":{"type":"array","items":{"type":"string"}},"line":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"log":{"type":"array","items":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"string"}],"additionalItems":false}},"status":{"type":"object","properties":{"status":{"type":"string"},"code":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["status"],"additionalProperties":false},"begin":{"type":"string"},"end":{"type":"string"}},"required":["begin","command","pid"],"additionalProperties":false}}}}},"security":[],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"integer","minimum":-1073741824,"maximum":1073741823}],"additionalItems":false}}}}}},"/opam_get/{command}":{"get":{"tags":["API"],"summary":"/opam_get/{command}","description":"","operationId":"11","parameters":[{"name":"command","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"COMMAND"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"pid":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"command":{"type":"array","items":{"type":"string"}},"line":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"log":{"type":"array","items":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"string"}],"additionalItems":false}},"status":{"type":"object","properties":{"status":{"type":"string"},"code":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["status"],"additionalProperties":false},"begin":{"type":"string"},"end":{"type":"string"}},"required":["begin","command","pid"],"additionalProperties":false}}}}},"security":[]}},"/poll_get/{pid_line}":{"get":{"tags":["API"],"summary":"/poll_get/{pid_line}","description":"","operationId":"12","parameters":[{"name":"pid_line","in":"path","description":"","required":true,"schema":{"type":"string"},"example":"12334,0"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","properties":{"pid":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"command":{"type":"array","items":{"type":"string"}},"line":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"log":{"type":"array","items":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"string"}],"additionalItems":false}},"status":{"type":"object","properties":{"status":{"type":"string"},"code":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["status"],"additionalProperties":false},"begin":{"type":"string"},"end":{"type":"string"}},"required":["begin","command","pid"],"additionalProperties":false}}}}},"security":[]}},"/processes":{"get":{"tags":["API"],"summary":"/processes","description":"","operationId":"13","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"pid":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"command":{"type":"array","items":{"type":"string"}},"line":{"type":"integer","minimum":-1073741824,"maximum":1073741823},"log":{"type":"array","items":{"type":"array","items":[{"type":"integer","minimum":-1073741824,"maximum":1073741823},{"type":"string"}],"additionalItems":false}},"status":{"type":"object","properties":{"status":{"type":"string"},"code":{"type":"integer","minimum":-1073741824,"maximum":1073741823}},"required":["status"],"additionalProperties":false},"begin":{"type":"string"},"end":{"type":"string"}},"required":["begin","command","pid"],"additionalProperties":false}}}}}},"security":[]}}},"components":{"securitySchemes":{}}}